var myLibrary;(()=>{let e=document.querySelector(".newTodoBtn"),t=document.querySelector(".projectBtn"),l=document.querySelector(".addTaskPopUp");const i=document.querySelector(".addProjectPopUp");let n=document.querySelectorAll(".cancel"),d=document.querySelector("#saveTo"),a=document.querySelector(".disable"),s=document.querySelector(".hiddenCont"),o=document.querySelector(".selectFolder");t.addEventListener("click",(()=>{i.style.visibility="visible",i.style.zIndex="2",a.style.visibility="visible"})),e.addEventListener("click",(()=>{o.style.display="block",P.style.display="none",F.style.display="none",I.style.display="inline",O(),l.style.zIndex="2",l.style.visibility="visible",a.style.visibility="visible"})),n.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),i.style.visibility="hidden",l.style.visibility="hidden",a.style.visibility="hidden",s.style.visibility="hidden"}))}));let c=document.querySelector("#projectName"),r=document.querySelector(".addToProject"),u=document.querySelector(".content"),y=document.querySelector(".projectList"),v="tsk.lists",m=JSON.parse(localStorage.getItem(v))||[{name:"Tasks",task:[]}],p=document.querySelector(".tasks"),h=!1;function E(){m.forEach((e=>{if("Tasks"!=e.name){let t=document.createElement("button");t.textContent=e.name,y.appendChild(t)}}))}function f(){localStorage.setItem(v,JSON.stringify(m))}let k="Tasks";function C(){y.childNodes.forEach((e=>{e.textContent==k?(e.classList.add("activeBtn"),p.classList.remove("activeBtn")):e.classList.remove("activeBtn")}))}function b(){y.childNodes.forEach((e=>{e.addEventListener("click",(()=>{k=e.textContent,x(),C()}))}))}p.classList.add("activeBtn"),p.addEventListener("click",(()=>{k="Tasks",p.classList.add("activeBtn"),x(),y.childNodes.forEach((e=>{e.classList.remove("activeBtn")}))})),r.addEventListener("click",(e=>{if(e.preventDefault(),a.style.visibility="hidden",""!=c.value){if(y.childNodes.forEach((e=>{e.textContent==c.value&&(h=!0)})),1==h){let e=document.querySelector(".error");return e.textContent="Name Already Exists!",i.appendChild(e),void(h=!1)}{document.querySelector(".error").textContent="",m.push({name:t=c.value,id:t,task:[]});let e=y.lastElementChild;for(;e;)y.removeChild(e),e=y.lastElementChild;E(),q(),z(),M(),C(),b(),f(),c.value="",i.style.visibility="hidden"}var t}}));let L=document.createElement("div");function x(){m.forEach((e=>{if(e.name==k){let t=document.createElement("div");0==e.task.length?(S(u),L.style.display="flex",u.style.alignItems="center",u.style.display="flex",u.style.justifyContent="center",u.appendChild(L)):(L.style.display="none",u.style.display="inline",S(u),e.task.forEach((e=>{let l=document.createElement("h3");l.classList.add("clickDiv");let i=document.createElement("div");""==e.date?i.textContent="No Specified Due-Date":i.textContent=e.date;let n=document.createElement("div"),d=document.createElement("div");d.classList.add("initial");let a=document.createElement("div");a.classList.add("taskDelete"),a.classList.add("deleteBtn"),d.appendChild(l),l.textContent=e.title,n.classList.add("task-wrapper"),t.classList.add("taskCont");let s=document.createElement("div");s.classList.add("expand");let o=document.createElement("div"),c=document.createElement("span");c.classList.add("text-style"),c.textContent=`Due-Date: ${e.date}`,o.appendChild(c);let r=document.createElement("div");r.textContent=`Description: ${e.des}`;let u=document.createElement("div");u.textContent=`Priority: ${e.prio}`;let y=document.createElement("div");y.classList.add("taskEdit"),y.classList.add("editBtn"),s.appendChild(r),s.appendChild(o),s.appendChild(u);let v=document.createElement("div");v.classList.add("task-control"),v.appendChild(y),v.appendChild(a),n.appendChild(d),n.appendChild(s),d.appendChild(v),t.appendChild(n);let m=document.createElement("div");m.classList.add("prioColor"),v.appendChild(m),"Low"==e.prio?m.style.backgroundColor="#00ff26":"Medium"==e.prio?m.style.backgroundColor="#c3ff00":"High"==e.prio&&(m.style.backgroundColor="#ff0800")}))),d.value=k,u.appendChild(t),K(),document.querySelectorAll(".deleteBtn").forEach((e=>{e.addEventListener("click",(()=>{m.forEach((t=>{k==t.name&&(t.task.forEach((l=>{if(l.title==e.parentNode.parentNode.firstChild.textContent){let e=t.task.indexOf(l);t.task.splice(e,1)}})),x())}))}))})),document.querySelectorAll(".clickDiv").forEach((e=>{e.addEventListener("click",(()=>{e.parentNode.parentNode.lastChild.classList.toggle("expand")}))})),K(),f()}}))}function S(e){let t=e.lastElementChild;for(;t;)e.removeChild(t),t=e.lastElementChild}function q(){S(d),m.forEach((e=>{let t=document.createElement("option");t.textContent=e.name,d.appendChild(t)}))}L.classList.add("noContent");let g=document.querySelector("#taskName"),N=document.querySelector("#taskDescription"),D=document.querySelector("#taskDue"),T=document.querySelectorAll(".taskPrio"),w="";function B(e,t,l,i){return{title:e,des:t,date:l,prio:i}}T.forEach((e=>{e.addEventListener("click",(()=>{w=e.valu}))}));let A=document.querySelector(".addTaskPopUp"),I=document.querySelector(".addToTask");function O(){g.value="",N.value="",D.value="",T.value=""}let j="",P=document.createElement("div");P.textContent="Task Already Exists!",P.style.display="none",l.appendChild(P),I.addEventListener("click",(e=>{if(P.style.display="none",""!=g.value){if(e.preventDefault(),m.forEach((e=>{e.task.forEach((e=>{e.title==g.value&&(j=!0)}))})),1==j)return P.style.display="block",void(j=!1);m.forEach((e=>{(d.value==e.name||"tasks"==d.value&&"Tasks"==e.name)&&e.task.push(B(g.value,N.value,D.value,w))})),x(),O(),g.style.border="none",A.style.visibility="hidden",a.style.visibility="hidden",K(),j=!1}})),n.forEach((e=>{e.addEventListener("click",(()=>{P.style.display="none",j=!1}))}));let U=document.createElement("div"),$=document.querySelector(".hiddenCont");function z(){document.querySelectorAll(".del").forEach((e=>{e.addEventListener("click",(()=>{$.style.visibility="visible",$.style.zIndex="2",a.style.visibility="visible",U.textContent=`Delete Project "${e.parentElement.textContent}"?`,$.prepend(U),document.querySelector(".confirm").addEventListener("click",(()=>{m.forEach((t=>{if(e.parentNode.textContent==t.name){let l=m.indexOf(t);m.splice(l,1),s.style.visibility="hidden",a.style.visibility="hidden",M(),b(),q(),C(),f(),e.parentNode.textContent==k&&S(u)}}))}))}))}))}const J=new Image;function M(){S(y),m.forEach((e=>{if("Tasks"!=e.name){let t=document.createElement("div");t.textContent=e.name,t.classList.add("projectStyle"),y.appendChild(t)}})),y.childNodes.forEach((e=>{const t=new Image;t.src=DelIcon,t.classList.add("del"),e.appendChild(t)})),z()}J.src="..images/trash.png",J.classList.add("del");let F=document.createElement("button");F.textContent="Save",F.classList.add("newAddBtn");let H="",G="";function K(){document.querySelectorAll(".editBtn").forEach((e=>{e.addEventListener("click",(()=>{P.style.display="none",G=e.parentNode.parentNode.firstChild.textContent,A.style.visibility="visible",I.style.display="none",document.querySelector(".popUpControl").prepend(F),F.style.display="inline",a.style.visibility="visible",m.forEach((e=>{e.name==k&&e.task.forEach((t=>{t.title==G&&(H=e.task.indexOf(t),g.value=t.title,N.value=t.des,T.value=t.prio,D.value=t.date)}))}))}))}))}let Q=!1;F.addEventListener("click",(e=>{""!=g.value&&(e.preventDefault(),m.forEach((e=>{e.task.forEach((e=>{g.value==G&&d.value==k||g.value==G&&d.value!=k?Q=!1:e.title==g.value&&(Q=!0)}))})),console.log(Q),0==Q?(m.forEach((e=>{d.value==k?e.task.forEach((t=>{t.title==G&&e.task.splice(e.task.indexOf(t),1,B(g.value,N.value,D.value,w))})):d.value==e.name&&(m.forEach((e=>{e.task.forEach((t=>{t.title==G&&(e.task.splice(e.task.indexOf(t),1),console.log("rtas"))}))})),e.task.push(B(g.value,N.value,D.value,w)))})),x(),l.style.visibility="hidden",a.style.visibility="hidden",F.style.display="none",I.style.display="inline"):(Q=!1,A.style.visibility="visible",P.style.display="block"))}));let R=document.querySelector(".tempText"),V=document.querySelector(".logo"),W=document.querySelector(".menu"),X=document.querySelector(".close");X.style.visibility="hidden";let Y=document.querySelector(".left-nav"),Z=document.querySelector(".burger"),_=document.createElement("div");_.textContent=k,u.prepend(_),Z.addEventListener("click",(()=>{Y.classList.toggle("show"),Y.classList.contains("show")?(W.style.visibility="hidden",X.style.visibility="visible"):(W.style.visibility="visible",X.style.visibility="hidden")})),u.addEventListener("click",(()=>{Y.classList.remove("show"),W.style.visibility="visible",X.style.visibility="hidden"}));let ee=window.matchMedia("(max-width:700px)");ee.addEventListener("change",(()=>{ee.matches?(V.textContent=k,R.style.display="none",window.addEventListener("click",(()=>{V.textContent=k}))):V.textContent="DONOT"})),E(),q(),M(),x(),z(),C(),b(),myLibrary={}})();